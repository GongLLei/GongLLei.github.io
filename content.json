[{"title":"webpack打包性能优化","date":"2017-02-27T04:50:16.000Z","path":"2017/02/27/webpack打包性能优化/","text":"最近尝试使用webpack来做前端资源模块化管理以及打包，感觉开发体验提升了不少，webpack将任何资源都视作模块，默认情况下统统打包进一个文件（bundle.js），这种all in JS 的方式我非常喜欢。但是同时也带来了一些问题，随着静态资源以及模块的增多，bundle.js会变的臃肿不堪，这就导致编译时间会大幅度上升，在使用热更新的情况下，甚至我们改动了一行代码都要重新编译一遍，等待时间可达到几十秒，这对我们的开发体验是非常不利的。同时，对于单页应用来说，所有的资源都在首屏时加载，会拖慢我们应用的首屏时间，导致用户体验变差。显然这种方式是十分粗暴的，因此需要进行合理的优化，以下是我近两天采用的一些方法。 1.抽离公共代码块 对于常用的类库或者common代码块来说，基本上我们不会修改到，因此我们可以把这一部分代码抽离出来，单独打包成一个文件，在入口的html文件当中单独引入。webpack中提供了内置的插件帮我们实现这个功能，例如我们想要将jquery单独打包，可以采用下面这种做法：1234567entry:&#123; path:__dirname+\"/src/entry.js\", vendor:[\"jquery\"] &#125; plugins:[ new webpack.optimize.CommonsChunkPlugin(&#123;name:\"vendor\",filename:\"vendor.js\"&#125;) ] 以上就将jquery单独打包为vendor.js，随后在入口的html文件中引入即可，如下：12&lt; script type=\"text/javascript\" src=\"vendor.js?24f0580a0c65db9f9ddd\"&gt;&lt;/script&gt;&lt; script type=\"text/javascript\" src=\"bundle.js?24f0580a0c65db9f9ddd\"&gt;&lt;/script&gt; 通过以上方式可以有效的提升开发时的体验，抽离出的公共部分不参与打包（热更新的情况下），减少了开发时编译的等待时间。 2.按需加载 对于单页应用，在首屏时加载所有的静态资源是非常低效的，因为并不是所有的模块都会立刻使用到，对于这一类的模块，我们可以在需要的时候加载。如果使用commonjs规范的话，可以使用如下的做法：1234 require.ensure([\"hellojs\"],function()&#123; var hello = require(\"hellojs\"); // and so on &#125;) 这样做在编译过程中会多生成一个文件 x.bundle.js，这个文件就是hello.js对应生成的包，只有当我们需要使用到它时，才会加载，这样就减少了bundle.js的大小，也就是说优化了首屏显示的速度。 3.代码压缩这是一种非常常见的做法，因此不做赘述。在webpack中有内置插件可以使用，推荐在上线时才开启。12345678new webpack.optimize.UglifyJsPlugin(&#123; //代码压缩 compress:&#123; warnings:false, &#125;, output:&#123; comments:false, &#125;, &#125;) 以上便是最近两天所使用的一些方法，当然还有很多可以优化的地方，我也在不断的学习，使用。 参考：https://webpack.github.io/docs/code-splitting.html#commons-chunk","tags":[{"name":"webpack","slug":"webpack","permalink":"http://yoursite.com/tags/webpack/"},{"name":"JavaScript","slug":"JavaScript","permalink":"http://yoursite.com/tags/JavaScript/"}]},{"title":"个人网站开通啦","date":"2017-02-26T11:38:59.000Z","path":"2017/02/26/个人网站开通啦/","text":"这是一个使用GithubPages+Hexo搭建的个人网站！今后会在这个网站上更新一下自己学习的经验以及生活上的一些感悟。","tags":[{"name":"生活","slug":"生活","permalink":"http://yoursite.com/tags/生活/"}]}]